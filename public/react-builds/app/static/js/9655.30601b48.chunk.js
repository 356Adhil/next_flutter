"use strict";(self.webpackChunkeventex_saas_portal=self.webpackChunkeventex_saas_portal||[]).push([[9655],{89655:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});var a=i(65043),l=i(94988),n=i(82550),o=i(36824),d=i(70579);const r=(0,l.A)((e=>{var t,i,l,r;const{id:c}=e,[s]=(0,a.useState)([{element:"button",type:"callback",callback:(e,t,i,a)=>{P(t._id,i,a,"approve")},itemTitle:{name:"user",type:"text",collection:""},condition:{item:"approve",if:"false",then:!0,else:!1},icon:"checked",title:"Approve",params:{api:"",parentReference:"",itemTitle:{name:"user",type:"text",collection:""},shortName:"Approve",addPrivilege:!0,delPrivilege:!0,updatePrivilege:!0,customClass:"medium"}},{element:"button",type:"callback",callback:(e,t,i,a)=>{P(t._id,i,a,"resend")},itemTitle:{name:"user",type:"text",collection:""},icon:"message",title:"Resend",params:{api:"",parentReference:"",itemTitle:{name:"user",type:"text",collection:""},shortName:"Resend Confirmation",addPrivilege:!0,delPrivilege:!0,updatePrivilege:!0,customClass:"medium"}}]),u=null===e||void 0===e||null===(t=e.openData)||void 0===t||null===(i=t.data)||void 0===i?void 0:i._id,{title:p,ticketType:m}=e,[v,h]=(0,a.useState)("all"),[f,k]=(0,a.useState)(null),[y,b]=(0,a.useState)(null),[g,x]=(0,a.useState)([]),w=(0,a.useMemo)((()=>[{type:"datetime",placeholder:"Registration Time",name:"createdAt",validation:"",default:"",label:"Registration Time",minimum:0,maximum:16,required:!0,view:!0,tag:!0,export:!1}]),[]),T=(0,a.useCallback)(((e,t)=>{if(!Array.isArray(e))return[];return[...e.map((e=>{const i={...e};var a;(i.conditionEnabled&&(i.condition={item:i.conditionWhenField,if:i.conditionCheckMatch.includes(",")?i.conditionCheckMatch.split(","):[i.conditionCheckMatch],then:"enabled"===i.conditionIfMatch?"enabled":"disabled",else:"enabled"===i.conditionIfMatch?"disabled":"enabled"}),"select"===i.type?(i.search=!0,i.filter=!0):i.filter=!1,["file","image"].includes(i.name)||(i.sort=!0),"multiSelect"===i.type&&("CSV"===i.apiType&&(i.selectApi=i.selectApi.toString().split(",").map((e=>({id:e,value:e}))),i.apiType="JSON"),i.default=""),["firstName","authenticationId","emailId"].includes(i.name))?(i.collection="","authenticationId"===i.name&&null!==t&&void 0!==t&&null!==(a=t.event)&&void 0!==a&&a.countries&&(i.countries=t.event.countries)):i.collection="formData";return i.showItem=i.name,i.update=!0,"title"===!i.type&&"info"===!i.type&&(i.tag=!0,i.view=!0),i.export=!0,i})),...w]}),[w]);(0,a.useEffect)((()=>{var t,i;document.title=`${p} - EventHex Portal`,(0,o.bQ)({event:null===e||void 0===e||null===(t=e.openData)||void 0===t||null===(i=t.data)||void 0===i?void 0:i._id},"event-form-fields").then((e=>{var t;const i=T(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.response);x([...[{type:"select",footnote:"",placeholder:"Choose Ticket",name:"ticket",validation:"",label:"Select Ticket",showItem:"value",default:"all",value:"all",preFill:[{id:"all",value:"All"}],required:!1,view:!1,filter:!0,add:!1,update:!0,apiType:"API",selectApi:"ticket/select/"+u+"/"+m,parentFilter:!0,export:!1},{type:"text",placeholder:"Ticket",name:"showticket",validation:"",collection:"ticket",showItem:"title",default:"",label:"Ticket",minimum:0,maximum:16,required:!0,add:!0,view:!0,bulkUpload:!0,tag:!0}],...i])}))}),[null===e||void 0===e||null===(l=e.openData)||void 0===l||null===(r=l.data)||void 0===r?void 0:r._id,T,p,u,v,m]);const P=(t,i,a,l)=>{e.setLoaderBox(!0),(0,o.LS)({id:t},`authentication/${l}`).then((t=>{e.setLoaderBox(!1),t.data?(e.setMessage({type:1,content:t.data.message,icon:"success"}),"approve"===l&&i(!1,a,{approve:!0})):console.error("Response data is undefined.")})).catch((t=>{e.setLoaderBox(!1),console.error("API request error:",t)}))};return("all"!==v&&(null===y||void 0===y?void 0:y.length)||g.length>0&&"all"===v)&&(0,d.jsx)(n.A,{api:`ticket-registration/${v}`,itemTitle:{name:"fullName",type:"text",collection:"authentication"},shortName:"all"===v?p:`${f.title}`,onFilter:async t=>{console.log(t),t.ticket!==v&&(await(async t=>{e.setLoaderBox(!0);try{var i;const e=await(0,o.bQ)({ticket:t,eventId:u},"ticket-form-data"),{ticketData:a,eventForm:l}=e.data,n=null!==(i=a.event.countries[0])&&void 0!==i?i:[];if(k(a),200===e.status){const i=[{type:"select",footnote:"",placeholder:"Choose Ticket",name:"ticket",validation:"",default:t,value:t,label:"Select Ticket",showItem:"value",required:!1,preFill:[{id:"all",value:"All"}],view:!0,tag:!1,filter:!0,add:!1,update:!1,apiType:"API",selectApi:"ticket/select/"+u+"/"+m,parentFilter:!0,export:!1},{type:"hidden",placeholder:"PhoneNumberLength",name:"PhoneNumberLength",validation:"",showItem:"PhoneNumberLength",collection:"formData",default:n.PhoneNumberLength,label:"PhoneNumberLength",minimum:1,maximum:40,required:!1,add:!0,update:!0,export:!1,view:!1},{type:"hidden",placeholder:"phoneCode",name:"phoneCode",default:n.phoneCode,validation:"",label:"phoneCode",minimum:1,maximum:40,required:!1,add:!0,update:!0,export:!1,view:!1},{type:"hidden",placeholder:"event",name:"event",default:a.event._id,validation:"",label:"event",minimum:1,maximum:40,required:!1,add:!0,export:!1,view:!1},{type:"text",placeholder:"Token",name:"token",validation:"",default:"",label:"Token",collection:"",showItem:"",required:!0,view:!0,tag:!0,export:!0}],o=T([..."Form"===a.type?[]:l,...e.data.response],e.data.ticketData);b((e=>{const t=[...o,...i];return JSON.stringify(e)!==JSON.stringify(t)?t:e}))}}catch(a){console.error("Error fetching ticket data:",a)}finally{e.setLoaderBox(!1)}})(t.ticket),h(t.ticket))},formMode:"single",preFilter:"all"===v?{event:u}:{ticket:v,event:u},parents:"all"===v?{event:u,type:m}:{type:m,ticket:v,event:u},bulkUplaod:!1,delPrivilege:!1,addPrivilege:!1,updatePrivilege:!1,exportPrivilege:!0,viewMode:"table",name:v+c,actions:s,...e,attributes:"all"===v?g:y},`${v}`)}))}}]);
//# sourceMappingURL=9655.30601b48.chunk.js.map