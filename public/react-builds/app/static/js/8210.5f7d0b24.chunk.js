"use strict";(self.webpackChunkeventex_saas_portal=self.webpackChunkeventex_saas_portal||[]).push([[8210],{8210:(e,t,l)=>{l.r(t),l.d(t,{default:()=>r});var i=l(65043),a=l(94988),n=l(82550),o=l(36824),d=l(70579);const r=(0,a.A)((e=>{var t,l,a,r;const{id:c}=e,u=null===e||void 0===e||null===(t=e.openData)||void 0===t||null===(l=t.data)||void 0===l?void 0:l._id,{title:s,ticketType:p}=e,[m,v]=(0,i.useState)("all"),[h,f]=(0,i.useState)(null),[k,b]=(0,i.useState)(null),[y,g]=(0,i.useState)([]),x=(0,i.useMemo)((()=>[{type:"datetime",placeholder:"Registration Time",name:"createdAt",validation:"",default:"",label:"Registration Time",minimum:0,maximum:16,required:!0,view:!0,tag:!0,export:!1}]),[]),w=(0,i.useCallback)(((e,t)=>{if(!Array.isArray(e))return[];return[...e.map((e=>{const l={...e};var i;(l.conditionEnabled&&(l.condition={item:l.conditionWhenField,if:l.conditionCheckMatch.includes(",")?l.conditionCheckMatch.split(","):[l.conditionCheckMatch],then:"enabled"===l.conditionIfMatch?"enabled":"disabled",else:"enabled"===l.conditionIfMatch?"disabled":"enabled"}),"select"===l.type?(l.search=!0,l.filter=!0):l.filter=!1,["file","image"].includes(l.name)||(l.sort=!0),"multiSelect"===l.type&&("CSV"===l.apiType&&(l.selectApi=l.selectApi.toString().split(",").map((e=>({id:e,value:e}))),l.apiType="JSON"),l.default=""),["firstName","authenticationId","emailId"].includes(l.name))?(l.collection="","authenticationId"===l.name&&null!==t&&void 0!==t&&null!==(i=t.event)&&void 0!==i&&i.countries&&(l.countries=t.event.countries)):l.collection="formData";return l.showItem=l.name,l.update=!0,"title"===!l.type&&"info"===!l.type&&(l.tag=!0,l.view=!0),l.export=!0,l})),...x]}),[x]);(0,i.useEffect)((()=>{var t,l;document.title=`${s} - EventHex Portal`,(0,o.bQ)({event:null===e||void 0===e||null===(t=e.openData)||void 0===t||null===(l=t.data)||void 0===l?void 0:l._id},"event-form-fields").then((e=>{var t;const l=w(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.response);g([...[{type:"select",footnote:"",placeholder:"Choose Ticket",name:"ticket",validation:"",label:"Select Ticket",showItem:"value",default:"all",value:"all",preFill:[{id:"all",value:"All"}],required:!1,view:!1,filter:!0,add:!1,update:!0,apiType:"API",selectApi:"ticket/select/"+u+"/"+p,parentFilter:!0,export:!1},{type:"text",placeholder:"Ticket",name:"showticket",validation:"",collection:"ticket",showItem:"title",default:"",label:"Ticket",minimum:0,maximum:16,required:!0,add:!0,view:!0,bulkUpload:!0,tag:!0}],...l])}))}),[null===e||void 0===e||null===(a=e.openData)||void 0===a||null===(r=a.data)||void 0===r?void 0:r._id,w,s,u,m,p]);return("all"!==m&&(null===k||void 0===k?void 0:k.length)||y.length>0&&"all"===m)&&(0,d.jsx)(n.A,{api:`ticket-registration/${m}`,itemTitle:{name:"fullName",type:"text",collection:"authentication"},shortName:"all"===m?s:`${h.title}`,onFilter:async t=>{console.log(t),t.ticket!==m&&(await(async t=>{e.setLoaderBox(!0);try{var l;const e=await(0,o.bQ)({ticket:t,eventId:u},"ticket-form-data"),{ticketData:i,eventForm:a}=e.data,n=null!==(l=i.event.countries[0])&&void 0!==l?l:[];if(f(i),200===e.status){const l=[{type:"select",footnote:"",placeholder:"Choose Ticket",name:"ticket",validation:"",default:t,value:t,label:"Select Ticket",showItem:"value",required:!1,preFill:[{id:"all",value:"All"}],view:!0,tag:!1,filter:!0,add:!1,update:!1,apiType:"API",selectApi:"ticket/select/"+u+"/"+p,parentFilter:!0,export:!1},{type:"hidden",placeholder:"PhoneNumberLength",name:"PhoneNumberLength",validation:"",showItem:"PhoneNumberLength",collection:"formData",default:n.PhoneNumberLength,label:"PhoneNumberLength",minimum:1,maximum:40,required:!1,add:!0,update:!0,export:!1,view:!1},{type:"hidden",placeholder:"phoneCode",name:"phoneCode",default:n.phoneCode,validation:"",label:"phoneCode",minimum:1,maximum:40,required:!1,add:!0,update:!0,export:!1,view:!1},{type:"hidden",placeholder:"event",name:"event",default:i.event._id,validation:"",label:"event",minimum:1,maximum:40,required:!1,add:!0,export:!1,view:!1},{type:"text",placeholder:"Token",name:"token",validation:"",default:"",label:"Token",collection:"",showItem:"",required:!0,view:!0,tag:!0,export:!0}],o=w([..."Form"===i.type?[]:a,...e.data.response],e.data.ticketData);b((e=>{const t=[...o,...l];return JSON.stringify(e)!==JSON.stringify(t)?t:e}))}}catch(i){console.error("Error fetching ticket data:",i)}finally{e.setLoaderBox(!1)}})(t.ticket),v(t.ticket))},formMode:"single",preFilter:"all"===m?{event:u}:{ticket:m,event:u},parents:"all"===m?{event:u,type:p}:{type:p,ticket:m,event:u},bulkUplaod:"all"!==m,delPrivilege:"all"!==m,addPrivilege:"all"!==m,updatePrivilege:"all"!==m,exportPrivilege:!0,viewMode:"table",name:m+c,...e,attributes:"all"===m?y:k},`${m}`)}))}}]);
//# sourceMappingURL=8210.5f7d0b24.chunk.js.map