"use strict";(self.webpackChunkeventex_saas_portal=self.webpackChunkeventex_saas_portal||[]).push([[9194],{59194:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var i=a(65043),l=a(94988),n=a(82550),o=a(26222),d=a(36824),r=a(70579);const c=(0,l.A)((e=>{(0,i.useEffect)((()=>{document.title="Responses - EventHex Portal"}),[]);const t=(0,i.useMemo)((()=>e.openData.data),[e.openData.data]),[a,l]=(0,i.useState)(null),[c,s]=(0,i.useState)(null),p=(0,i.useMemo)((()=>{var t;return null!==(t=e.openData.data.type)&&void 0!==t?t:"Ticket"}),[e.openData.data.type]);(0,i.useEffect)((()=>{a||c||(async()=>{var e;s(!0);const i=await(0,d.bQ)({ticket:t._id,eventId:null!==(e=t.event._id)&&void 0!==e?e:t.event},"ticket-form-data"),n=i.data.ticketData.event.countries;if(200===i.status){var o;const e=null!==(o=t.enableAbstract)&&void 0!==o&&o?[{type:"file",placeholder:"Abstract",name:"abstract",validation:"",default:"",label:"Abstract",collection:"",showItem:"",required:!0,view:!0,tag:!0,export:!0},{type:"checkbox",placeholder:"Abstract Uploaded",name:"abstractUploaded",validation:"",default:"",label:"Abstract Uploaded",collection:"",showItem:"",required:!0,view:!0,tag:!0,export:!0,filter:!0}]:[],d=[...[..."Ticket"===p?i.data.eventForm:[],...i.data.response].map((e=>{const t={...e};var a;return t.conditionEnabled&&(t.condition={item:t.conditionWhenField,if:t.conditionCheckMatch.includes(",")?t.conditionCheckMatch.split(","):[t.conditionCheckMatch],then:"enabled"===t.conditionIfMatch?"enabled":"disabled",else:"enabled"===t.conditionIfMatch?"disabled":"enabled"}),"select"===t.type?(t.search=!0,t.filter=!0):t.filter=!1,["file","image"].includes(t.name)||(t.sort=!0),"multiSelect"===t.type&&("CSV"===t.apiType&&(t.selectApi=t.selectApi.toString().split(",").map((e=>({id:e,value:e}))),t.apiType="JSON"),t.default=""),["firstName","authenticationId","emailId"].includes(t.name)?(t.collection="","authenticationId"===t.name&&null!==n&&void 0!==n&&null!==(a=n.event)&&void 0!==a&&a.countries&&(t.countries=n.event.countries)):t.collection="formData",t.showItem=t.name,t.update=!0,"title"===!t.type&&"info"===!t.type&&(t.tag=!0,t.view=!0),t.export=!0,t})),...e,{type:"datetime",placeholder:"Registered On",name:"createdAt",validation:"",default:"",label:"Registered On",minimum:0,maximum:16,required:!0,view:!0,tag:!0},{type:"select",placeholder:"Approval",name:"approve",validation:"",default:"",collection:"",label:"Approval",required:!1,selectApi:[{id:!0,value:"Approved"},{id:!1,value:"Pending"}],apiType:"JSON",view:!0,tag:!0,add:!1,filter:!0,export:!0},{type:"text",placeholder:"_id",name:"_id",validation:"",default:"",label:"_id",minimum:5,maximum:40,required:!0,view:!1,tag:!1,export:!0}];a||l(d)}})()}),[t,a,c,p]);const u=(t,a,i,l)=>{e.setLoaderBox(!0),(0,d.LS)({id:t},`authentication/${l}`).then((t=>{e.setLoaderBox(!1),t.data?(e.setMessage({type:1,content:t.data.message,icon:"success"}),"approve"===l&&a(!1,i,{approve:!0})):console.error("Response data is undefined.")})).catch((t=>{e.setLoaderBox(!1),console.error("API request error:",t)}))},[m]=(0,i.useState)([{element:"button",type:"callback",callback:(e,t,a,i)=>{u(t._id,a,i,"approve")},itemTitle:{name:"user",type:"text",collection:""},condition:{item:"approve",if:"false",then:!0,else:!1},icon:"next",title:"Approve",params:{api:"",parentReference:"",itemTitle:{name:"user",type:"text",collection:""},shortName:"Approve",addPrivilege:!0,delPrivilege:!0,updatePrivilege:!0,customClass:"medium"}},{element:"button",type:"callback",callback:(e,t,a,i)=>{u(t._id,a,i,"resend")},itemTitle:{name:"user",type:"text",collection:""},icon:"next",title:"Resend Confirmation",params:{api:"",parentReference:"",itemTitle:{name:"user",type:"text",collection:""},shortName:"Resend Confirmation",addPrivilege:!0,delPrivilege:!0,updatePrivilege:!0,customClass:"medium"}}]);return(null===a||void 0===a?void 0:a.length)>0&&(0,r.jsx)(o.mc,{className:"noshadow",children:(0,r.jsx)(n.A,{actions:m,api:`ticket-registration/${t._id}`,itemTitle:{name:"fullName",type:"text",collection:"authentication"},shortName:`${t.title} Responses`,formMode:"single",preFilter:{ticket:t._id,type:p},bulkUplaod:!0,delPrivilege:!1,addPrivilege:!1,updatePrivilege:!1,exportPrivilege:!0,viewMode:"table",name:t._id,...e,attributes:a})})}))}}]);
//# sourceMappingURL=9194.3e2c1786.chunk.js.map